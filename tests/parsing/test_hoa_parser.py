import time
from unittest import TestCase

from hoa.parsers import HOAParser

from parsing.hoa_parser import hoa_to_transitions

example = '''HOA: v1
tool: "strix" "21.0.0"
States: 1
Start: 0
AP: 16 "pred__cntprev_LT_cnt_" "pred__cntprev_GT_cnt_" "pred__NEG_granting" "pred__cnt_EQ_0_" "pred__cnt_LT__EQ_1_" "pred_room1" "q2" "q1" "q0" "release" "doTask" "otherRoom" "dealWithTasks" "request" "done2" "done1"
acc-name: all
Acceptance: 0 t
--BODY--
State: 0 "[0]"
[(0 & (1 | (3 | (((6 | (7 | (8 | (9 | (10 | (11 | !12)))))) | !5) | !4))) | !0 & (1 & (4 | (5 | (6 | ((8 | ((10 & (11 | 12) | !10 & (11 & 12)) | !9)) | !7)))) | !1 & (3 & ((5 & (6 | (7 | (8 & (9 | (10 & (11 | 12) | !10 & (11 & 12))) | !8 & (9 | (11 | 12))))) | !5 & ((7 | (8 | (9 | (10 | (12 | !11))))) | !6)) | !4) | !3 & ((5 & (6 | (7 | (8 | (9 | (11 | 12))))) | !5 & (6 | ((8 | (9 | (10 | (12 | !11)))) | !7))) | !4)))) & (t)] 0
[(!(0 | (1 | ((3 | (4 | ((6 | (7 | ((9 | (10 | (11 | (12 | 13)))) | !8))) | !5))) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((3 | (4 | (5 | (6 | (7 | ((9 | (10 | (11 | (12 | 13)))) | !8)))))) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((((5 | (6 | (7 | ((9 | (10 | ((12 | 13) | !11))) | !8)))) | !4) | !3) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | (((((6 | (7 | ((9 | (10 | (11 | (12 | 13)))) | !8))) | !5) | !4) | !3) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((((((7 | (8 | (9 | (10 | (11 | (13 | !12)))))) | !6) | !5) | !4) | !3) | !2)))) & (!(15 | !14))] 0
[(!((1 | ((3 | (((6 | (7 | ((9 | (10 | (11 | (12 | !13)))) | !8))) | !5) | !4)) | !2)) | !0)) & (!(15 | !14))] 0
[(!(0 | (1 | ((((5 | (6 | (7 | ((9 | (10 | (11 | (12 | 13)))) | !8)))) | !4) | !3) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((((5 | ((7 | (8 | (9 | (10 | (11 | (13 | !12)))))) | !6)) | !4) | !3) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | (((((6 | (7 | ((9 | (10 | ((12 | 13) | !11))) | !8))) | !5) | !4) | !3) | !2)))) & (!(15 | !14))] 0
[(!((1 | ((3 | ((5 | (6 | (7 | ((9 | (10 | (11 | (12 | !13)))) | !8)))) | !4)) | !2)) | !0)) & (!(15 | !14))] 0
[(!(0 | (1 | (((((6 | (7 | (((10 | (11 & (12 | 13) | !11 & (12 & 13))) | !9) | !8))) | !5) | !4) | !3) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((3 | ((5 | (6 | (7 | ((9 | (10 | ((12 | 13) | !11))) | !8)))) | !4)) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((3 | (((6 | (7 | ((9 | (10 | (11 | (12 | 13)))) | !8))) | !5) | !4)) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((3 | (((6 | ((8 | (9 | (10 | (11 | (13 | !12))))) | !7)) | !5) | !4)) | !2)))) & (!(15 | !14))] 0
[(!((1 | ((3 | (4 | ((6 | (7 | ((9 | (10 | (11 | (12 | !13)))) | !8))) | !5))) | !2)) | !0)) & (!(15 | !14))] 0
[(!(0 | (1 | ((((5 | (6 | (7 | (((10 | (11 & (12 | 13) | !11 & (12 & 13))) | !9) | !8)))) | !4) | !3) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((3 | ((5 | (6 | (7 | ((9 | (10 | (11 | (12 | 13)))) | !8)))) | !4)) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((3 | ((5 | (6 | ((8 | (9 | (10 | (11 | (13 | !12))))) | !7))) | !4)) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((3 | (((6 | (7 | ((9 | (10 | ((12 | 13) | !11))) | !8))) | !5) | !4)) | !2)))) & (!(15 | !14))] 0
[(!((1 | ((3 | (4 | (5 | (6 | (7 | ((9 | (10 | (11 | (12 | !13)))) | !8)))))) | !2)) | !0)) & (!(15 | !14))] 0
[(!(0 | ((2 | ((((6 | ((8 | (9 | ((11 & (12 | 13) | !11 & (12 & 13)) | !10))) | !7)) | !5) | !4) | !3)) | !1))) & (!(14 | !15))] 0
[(!(0 | (1 | ((3 | (4 | (5 | (6 | (7 | ((9 | (10 | ((12 | 13) | !11))) | !8)))))) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((3 | (4 | ((6 | ((8 | (9 | (10 | (11 | (13 | !12))))) | !7)) | !5))) | !2)))) & (!(15 | !14))] 0
[(!(0 | ((2 | (((5 | (6 | ((8 | (9 | ((11 & (12 | 13) | !11 & (12 & 13)) | !10))) | !7))) | !4) | !3)) | !1))) & (!(15 | !14))] 0
[(!(0 | (1 | ((3 | (4 | (5 | (6 | ((8 | (9 | (10 | (11 | (13 | !12))))) | !7))))) | !2)))) & (!(15 | !14))] 0
[(!(0 | (1 | ((3 | (4 | ((6 | (7 | ((9 | (10 | ((12 | 13) | !11))) | !8))) | !5))) | !2)))) & (!(15 | !14))] 0
[(!(0 | ((2 | (3 | (4 | ((6 | ((8 | (9 | ((11 & (12 | 13) | !11 & (12 & 13)) | !10))) | !7)) | !5)))) | !1))) & (!(14 | !15))] 0
[(!(0 | ((2 | (3 | (((6 | ((8 | (9 | ((11 & (12 | 13) | !11 & (12 & 13)) | !10))) | !7)) | !5) | !4))) | !1))) & (!(14 | !15))] 0
[(!(0 | ((2 | (3 | (4 | (5 | (6 | ((8 | (9 | ((11 & (12 | 13) | !11 & (12 & 13)) | !10))) | !7)))))) | !1))) & (!(15 | !14))] 0
[(!(0 | ((2 | (3 | ((5 | (6 | ((8 | (9 | ((11 & (12 | 13) | !11 & (12 & 13)) | !10))) | !7))) | !4))) | !1))) & (!(15 | !14))] 0
--END--'''


class Test(TestCase):

    def test_hoaparser(self):
        start = time.time()
        hoa_to_transitions(example)
        end = time.time()

        hoa_parser = HOAParser()
        start_hoa = time.time()
        hoa_parser(example)
        end_hoa = time.time()

        self.assertTrue((end - start) < (end_hoa - start_hoa))

